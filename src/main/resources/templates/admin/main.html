<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
<head
	th:replace="~{parts/admin-common :: html_head('管理者トップ - さわやか医院予約システム')}"></head>
<link rel="stylesheet" th:href="@{/css/parts/main.css}">
<body class="bg-light text-dark">
	<div class="d-flex flex-column min-vh-100 bg-light">
		<header th:replace="~{parts/admin-common :: header()}"></header>
		<main class="container flex-grow-1 py-4">
			<div class="row justify-content-center">
				<!-- パネル：2カラム用 -->
				<div class="col-12 col-md-10 col-lg-8">
					<div class="shadow-sm"
						style="border-radius: 1.5rem; overflow: hidden; background: #fff;">
						<!-- タイトル行 -->
						<div class="row g-0">
							<div class="col-12">
								<h2 class="mb-0 py-3 text-center" style="font-weight: bold;">
									予約タイムテーブル</h2>
								<hr class="my-0">
							</div>
						</div>
						<!-- 2カラム -->
						<div class="row g-0">
							<!-- 営業日選択フォーム -->
							<div class="col-md-6 border-end" style="background: #f9fbfe;">
								<div
									class="p-4 h-100 d-flex flex-column gap-3 flex-grow-1 text-center">
									<label class="form-label mb-3">営業日を選択：</label>
									<div class="d-flex flex-column gap-3 flex-grow-1">
										<a th:each="day, iter : ${businessDays}"
											th:href="@{/admin/main(businessDayId=${day.id})}"
											th:text="${day.businessDayLabel}"
											th:classappend="${selectedBusinessDayId != null and day.id == selectedBusinessDayId} ? 'btn btn-primary business-day-btn' : 'btn btn-outline-primary business-day-btn'"
											class="btn business-day-btn py-2" > </a>
									</div>
									<div
										th:if="${businessDays == null or #lists.isEmpty(businessDays)}">
										<span class="text-secondary">営業日が登録されていません</span>
									</div>
								</div>
							</div>
							<!-- タイムテーブル -->
							<div
								class="col-md-6 d-flex align-items-center justify-content-center"
								style="padding: 2rem;">
								<div class="w-100">
									<div th:if="${selectedBusinessDayId != null}">
										<label class="form-label mb-3"
											th:text="${selectedBusinessDayLabel != null && selectedBusinessDayLabel != '' ? selectedBusinessDayLabel + 'の予約タイムテーブル' : '選択した日付の予約タイムテーブル'}"></label>
										<table class="table table-bordered" id="timetable">
											<thead>
												<tr>
													<th>時間枠</th>
													<th>予約情報</th>
												</tr>
											</thead>
											<tbody>
												<tr
													th:if="${timeTable == null or #lists.isEmpty(timeTable)}">
													<td colspan="2" class="text-center">予約情報はありません</td>
												</tr>
												<tr th:each="slot : ${timeTable}"
													th:if="${timeTable != null}"
													th:classappend="${slot != null and slot.patientName != null} ? 'reserved-row'">
													<td th:text="${slot != null ? slot.timeLabel : ''}"></td>
													<td><span
														th:if="${slot != null and slot.patientName != null}">
															<span th:text="${slot.patientName}"></span> (<span
															th:text="${slot.cardNumber}"></span>)<br> <span
															th:text="${slot.phoneNumber}"></span>
													</span> <span th:if="${slot == null or slot.patientName == null}"></span>
													</td>
												</tr>
											</tbody>
										</table>
									</div>
									<div th:unless="${selectedBusinessDayId != null}"
										class="h-100 d-flex align-items-center justify-content-center"
										style="min-height: 200px;">
										<span class="text-secondary">営業日を選択してください</span>
									</div>
								</div>
							</div>
							<!-- /タイムテーブル -->
						</div>
					</div>
				</div>
				<!-- /col -->
			</div>
			<!-- /row -->
		</main>
		<footer th:replace="~{parts/admin-common :: footer()}"></footer>
	</div>
</body>
</html>