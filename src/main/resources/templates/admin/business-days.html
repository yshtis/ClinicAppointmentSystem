<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
<head
	th:replace="parts/admin-common.html :: html_head('営業日設定 - さわやか医院予約システム')">
</head>
<body>
	<div th:replace="parts/admin-common.html :: header()"></div>

	<div class="container mt-5 mb-5" style="max-width: 950px;">
		<div class="admin-card">
			<h2 class="card-title">営業日設定</h2>

			<!-- メッセージ表示 -->
			<div th:if="${message}" class="alert alert-success"
				th:text="${message}"></div>
			<div th:if="${error}" class="alert alert-danger" th:text="${error}"></div>

			<!-- 営業日追加フォーム -->
			<form th:action="@{/admin/business-days/add}" method="post"
				class="mb-4">
				<div class="row g-2 align-items-end">
					<div class="col-auto">
						<label for="date" class="form-label">日付</label>
					</div>
					<div class="col-auto">
						<input type="date" id="date" name="date" class="form-control"
							required>
					</div>
					<div class="col-auto">
						<label class="form-label">種別</label>
					</div>
					<div class="col-auto">
						<select name="type" class="form-select">
							<option value="allday">終日</option>
							<option value="am">午前のみ</option>
							<option value="pm">午後のみ</option>
						</select>
					</div>
					<div class="col-auto">
						<button type="submit" class="btn btn-primary">追加</button>
					</div>
				</div>
				<input type="hidden" th:name="${_csrf.parameterName}"
					th:value="${_csrf.token}" />
			</form>

			<!-- 営業日一覧 -->
			<h5 class="mb-3">営業日一覧</h5>
			<div class="table-responsive">
				<table class="table table-bordered">
					<thead>
						<tr>
							<th>日付</th>
							<th>種別</th>
							<th>操作</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="day : ${businessDays}">
							<td th:text="${day.businessDate}"></td>
							<td><span th:switch="${day.type}"> <span
									th:case="'allday'">終日</span> <span th:case="'am'">午前のみ</span> <span
									th:case="'pm'">午後のみ</span> <span th:case="*">不明</span>
							</span></td>
							<td>
								<form th:action="@{/admin/business-days/delete}" method="post"
									style="display: inline;">
									<input type="hidden" name="id" th:value="${day.id}" /> <input
										type="hidden" th:name="${_csrf.parameterName}"
										th:value="${_csrf.token}" />
									<button type="submit" class="btn btn-danger btn-sm"
										onclick="return confirm('本当に削除しますか？');">削除</button>
								</form>
							</td>
						</tr>
						<tr th:if="${#lists.isEmpty(businessDays)}">
							<td colspan="3" class="text-center text-secondary">営業日が登録されていません</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>

	<div th:replace="parts/admin-common.html :: footer()"></div>
</body>
</html>